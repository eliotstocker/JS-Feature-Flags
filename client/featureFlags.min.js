(function() {var a={l:function(b,c){a.j=!0;a.m=b;a.s(c);a.g("setup",{flags:a.b,application:a.application})},s:function(b){for(var c in b)for(var d=0;d<a.b.length;d++)c===a.b[d].id&&(a.b[d].default=b[c])},u:function(b){for(var c=0;c<a.b.length;c++)if(b.id===a.b[c].id){a.h("change",b.id,new CustomEvent("change",{detail:{flag:b.id,newValue:b.value,oldValue:a.b[c]["default"],timestamp:(new Date).getTime()}}));a.b[c]["default"]=b.value;break}},h:function(b,c,d){var e;if(a.a.f[c]&&a.a.f[c][b])for(e=0;e<a.a.f[c][b].length;e++)a.a.f[c][b][e](d);
if(a.a.c[b])for(e=0;e<a.a.c[b].length;e++)a.a.c[b][e]()},o:function(){for(var b=0;b<a.b.length;b++)for(var c=0;c<a.flags.length;c++)a.flags[c].id===a.b[b].id&&a.flags[c]["default"]!==a.b[b]["default"]&&(a.h("change",a.flags[c].id,new CustomEvent("change",{detail:{flag:a.flags[c].id,newValue:a.flags[c]["default"],oldValue:a.b[b]["default"],timestamp:(new Date).getTime()}})),a.b[b]["default"]=a.flags[c]["default"]);a.g("setup",{flags:a.b,application:a.application})},a:{c:{},f:{}},version:"0.0.1",j:!1,
m:null,isReady:!1,b:[],g:function(b,c){window.postMessage({type:"__ES_FEATUREFLAGS_APP",action:b,payload:c},"*")},addEventListener:function(b,c){if(-1<b.indexOf(":")){var d=b.split(":");b=d[0];d=d[1];a.a.f[d]||(a.a.f[d]={});a.a.f[d][b]||(a.a.f[d][b]=[]);a.a.f[d][b].push(c)}else a.a.c[b]||(a.a.c[b]=[]),a.a.c[b].push(c)},removeEventListener:function(b,c){if(b.indexOf(":")){var d=b.split(":");b=d[0];d=d[1];a.a.f[d]||(a.a.f[d]={});a.a.f[d][b]||(a.a.f[d][b]=[]);for(var e=-1,f=0;f<a.a.f[d][b].length;f++)if(a.a.f[d][b].toString()===
c.toString()){e=f;break}-1<e&&a.a.f[d][b].splice(e,1)}else{a.a.c[b]||(a.a.c[b]={});e=-1;for(f=0;f<a.a.c[b].length;f++)if(a.a.c[b].toString()===c.toString()){e=f;break}-1<e&&a.a.c[b].splice(e,1)}},getFlag:function(b){if(!a.i)throw Error("Feature flags is not yet in the ready state, please listen for the 'ready' event");for(var c=0;c<a.b.length;c++)if(b===a.b[c].id)return a.b[c].default;throw Error("No flag with id: "+b+" was found, have you set it up in the flags console");},initialize:function(){0>
a.application.domains.indexOf(window.location.hostname)?console.warn("Feature Flags Application: '"+a.application.name+"' is not enabled for domain: '"+window.location.hostname+"'"):(window.addEventListener("message",function(b){if(b.source===window&&b.data.type&&"__ES_FEATUREFLAGS_EXTENSION"===b.data.type)switch(b.data.status){case "ready":a.l(b.data.version,b.data.local);break;case "update":a.u(b.data.payload);break;case "reset":a.o()}}),a.b=JSON.parse(JSON.stringify(a.flags)),a.g("ready",{version:a.version,
application:a.application}),"complete"===document.readyState?setTimeout(function(){a.i=!0;if(a.a.c.ready)for(var b=0;b<a.a.c.ready.length;b++)a.a.c.ready[b](new Event("ready"))},60):window.onload=function(){setTimeout(function(){a.i=!0;if(a.a.c.ready)for(var b=0;b<a.a.c.ready.length;b++)a.a.c.ready[b](new Event("ready"))},60)})}};window.rtoFeatureFlags=a;}).call(window)
